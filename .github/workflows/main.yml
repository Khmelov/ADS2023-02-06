on:
  pull_request:
    branches:
    - master

jobs:
  check_package_files:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Check package files
      run: |
        PATTERN3="\/package\/[^\/]+\/[^\/]+\/[^\/]+\/"
        PATTERN4="\/package\/[^\/]+\/[^\/]+\/[^\/]+\/[^\/]+\/"
        FILES=$(git diff --name-only ${{ github.base_ref }} ${{ github.sha }} | grep -E "$PATTERN4")
        if [ -z "$FILES" ]; then
          echo "Error: PR contains files not belonging to the specified package structure"
          exit 1
        else
          echo "All files in PR belong to the specified package structure"
        fi
